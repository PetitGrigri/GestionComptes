{% set paginationMax 	= (maxMouvementFinanciers/(longueur))|round(0,'ceil') %}
{% set paginationAct	= ((positionActuelle+longueur)/longueur)|round(0,'floor') %}
					
{% extends "FGSGestionComptesBundle::layout.html.twig" %}

{% block title %}Visualisation des données d'un compte{% endblock %}

{% block contenu %}
	<div class='row'>
		<div class='col-xs-12, col-md-4'>
			<canvas id="canvas-categorie-totaux" width="2" height="1"/>
		</div>
		<div class='col-xs-12, col-md-6'>

		</div>
	</div>
	
	<div class='row'>
		<div class="col-md-1 col-xs-2" class="height: 38px;">
			<img src="{{ asset('bundles/fgsgestioncomptes/'~compte.banque.urlImage) }}" style="height: 32px; margin-top: 22px; margin-bottom:12" />
		</div>
		<div class="col-md-11 col-xs-10">
			<h1>{{ compte.nom }}<span class="label {{ compte.montantActuel < 0 ? 'label-danger':'label-success' }} pull-right">{{ compte.montantActuel|number_format(2, ',', ' ') }} €</span></h1>
		</div>
	</div>
	<div class='row'>
		<a href="{{ path('fgs_gestion_comptes_visualiser_mouvement_financier_compte_mois',{'id':id}) }}" class='btn btn-primary pull-right'><span class='glyphicon glyphicon-calendar'></span> Visualisation du mois en cours</a>
	</div>
	{% if compte.mouvementFinanciers is not empty %}
	
		<table class="table table-striped ">
			<caption>
				Visualisation de vos {{ longueur }} {% if paginationAct == 1  %}dernière {% endif %}opérations {% if paginationAct > 1  %} (page {{ paginationAct }}){% endif %}
			</caption>
			<thead>
				<tr>
					<th>
						Date
					</th>
					<th>
						Libellé
					</th>
					<th>
						Catégorie
					</th>
					<th class="text-right">
						Montant
					</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				{% for mouvementFinancier in compte.mouvementFinanciers %}
				<tr>
					<td>{{ mouvementFinancier.date|date("d/m/Y") }}</td>
					<td>{% if mouvementFinancier.commentaire %}<span class='glyphicon glyphicon-tag' data-toggle='tooltip' title='{{ mouvementFinancier.commentaire }}'></span> {% endif %}{{ mouvementFinancier.libelle }}</td>
					<td><p class='label {{ mouvementFinancier.montant > 0 ? 'label-success':'label-warning' }} categorie-mf'><span class=' text-center glyphicon {{ mouvementFinancier.categorieMouvementFinancier.icone }}'></span> {{ mouvementFinancier.categorieMouvementFinancier.libelle }}</p></td>
					<td class="text-right">{{ mouvementFinancier.montant }} €</td>
					<td class='text-right'>
						<a href='{{ path('fgs_gestion_comptes_modifier_mouvement_financier', {'id':mouvementFinancier.id}) }}' class='btn btn-info btn-xs'><span class='glyphicon glyphicon-pencil'></span></a> 
						<a href='{{ path('fgs_gestion_comptes_supprimer_mouvement_financier', {'id':mouvementFinancier.id}) }}' class='btn btn-danger btn-xs'><span class='glyphicon glyphicon-remove'></span></a>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		
		{# 				<li class="enabled"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
				<li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
				<li class="disabled"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
				#}
		<div class='text-center'>
			<nav>
				<ul class="pagination">
					{% for i in 1..paginationMax %}
						<li class="{% if paginationAct == i %}active{% endif %}"><a href="{{ path('fgs_gestion_comptes_visualiser_mouvement_financier_compte', {'id':id, 'debut':(((i-1)*longueur)), 'longueur':longueur}) }}">{{ i }} <span class="sr-only">(current)</span></a></li>
					{% endfor %}
				</ul>
			</nav>
		</div>
	{% else %}
		<p class='well well-sm' style='background-color:#f9f9f9;'>Aucune transaction n'a encore été réalisé sur ce compte<p>
	{% endif %}


{% endblock %}


{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="{{ asset('bundles/fgsgestioncomptes/css/iconset/daily-life.css') }}">
	<style>
	.categorie-mf {
		font-size:90%; font-weight: normal;
	}
	</style>
{% endblock %}